<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>HVE: hve_config Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HVE
   </div>
   <div id="projectbrief">HVE Hardware Video Encoder library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('structhve__config.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">hve_config Struct Reference<div class="ingroups"><a class="el" href="group__interface.html">Public interface</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Encoder configuration.  
 <a href="structhve__config.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="hve_8h_source.html">hve.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a2474a5474cbff19523a51eb1de01cda4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2474a5474cbff19523a51eb1de01cda4"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhve__config.html#a2474a5474cbff19523a51eb1de01cda4">width</a></td></tr>
<tr class="memdesc:a2474a5474cbff19523a51eb1de01cda4"><td class="mdescLeft">&#160;</td><td class="mdescRight">width of the encoded frames <br /></td></tr>
<tr class="separator:a2474a5474cbff19523a51eb1de01cda4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad12fc34ce789bce6c8a05d8a17138534"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad12fc34ce789bce6c8a05d8a17138534"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhve__config.html#ad12fc34ce789bce6c8a05d8a17138534">height</a></td></tr>
<tr class="memdesc:ad12fc34ce789bce6c8a05d8a17138534"><td class="mdescLeft">&#160;</td><td class="mdescRight">height of the encoded frames <br /></td></tr>
<tr class="separator:ad12fc34ce789bce6c8a05d8a17138534"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92929d25bad8a3a6a35748fd0b57f608"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a92929d25bad8a3a6a35748fd0b57f608"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhve__config.html#a92929d25bad8a3a6a35748fd0b57f608">input_width</a></td></tr>
<tr class="memdesc:a92929d25bad8a3a6a35748fd0b57f608"><td class="mdescLeft">&#160;</td><td class="mdescRight">optional scaling if non-zero and different from width <br /></td></tr>
<tr class="separator:a92929d25bad8a3a6a35748fd0b57f608"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7df9c13d26beabdeac42ba16e1d34fa0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7df9c13d26beabdeac42ba16e1d34fa0"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhve__config.html#a7df9c13d26beabdeac42ba16e1d34fa0">input_height</a></td></tr>
<tr class="memdesc:a7df9c13d26beabdeac42ba16e1d34fa0"><td class="mdescLeft">&#160;</td><td class="mdescRight">optional scaling if non-zero and different from height <br /></td></tr>
<tr class="separator:a7df9c13d26beabdeac42ba16e1d34fa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e35b8d74e1ac59b82f506293654d26d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0e35b8d74e1ac59b82f506293654d26d"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhve__config.html#a0e35b8d74e1ac59b82f506293654d26d">framerate</a></td></tr>
<tr class="memdesc:a0e35b8d74e1ac59b82f506293654d26d"><td class="mdescLeft">&#160;</td><td class="mdescRight">framerate of the encoded video <br /></td></tr>
<tr class="separator:a0e35b8d74e1ac59b82f506293654d26d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8059c3b19eb356cf729e5d25b139647e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8059c3b19eb356cf729e5d25b139647e"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhve__config.html#a8059c3b19eb356cf729e5d25b139647e">device</a></td></tr>
<tr class="memdesc:a8059c3b19eb356cf729e5d25b139647e"><td class="mdescLeft">&#160;</td><td class="mdescRight">NULL / "" or device, e.g. "/dev/dri/renderD128". <br /></td></tr>
<tr class="separator:a8059c3b19eb356cf729e5d25b139647e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86262c9d0f74a355ea8deb9f204b8c68"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a86262c9d0f74a355ea8deb9f204b8c68"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhve__config.html#a86262c9d0f74a355ea8deb9f204b8c68">encoder</a></td></tr>
<tr class="memdesc:a86262c9d0f74a355ea8deb9f204b8c68"><td class="mdescLeft">&#160;</td><td class="mdescRight">NULL / "" or encoder, e.g. "h264_vaapi". <br /></td></tr>
<tr class="separator:a86262c9d0f74a355ea8deb9f204b8c68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c4e623125f1ef985a5c7e07851ade31"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7c4e623125f1ef985a5c7e07851ade31"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhve__config.html#a7c4e623125f1ef985a5c7e07851ade31">pixel_format</a></td></tr>
<tr class="memdesc:a7c4e623125f1ef985a5c7e07851ade31"><td class="mdescLeft">&#160;</td><td class="mdescRight">NULL / "" for NV12 or format, e.g. "rgb0", "bgr0", "nv12", "yuv420p", "p010le". <br /></td></tr>
<tr class="separator:a7c4e623125f1ef985a5c7e07851ade31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41cdb4a229a3d71837d607124f8a07a4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a41cdb4a229a3d71837d607124f8a07a4"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhve__config.html#a41cdb4a229a3d71837d607124f8a07a4">profile</a></td></tr>
<tr class="memdesc:a41cdb4a229a3d71837d607124f8a07a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">0 to guess from input or profile e.g. FF_PROFILE_H264_MAIN, FF_PROFILE_H264_HIGH, FF_PROFILE_HEVC_MAIN, ... <br /></td></tr>
<tr class="separator:a41cdb4a229a3d71837d607124f8a07a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa65bd935fe9d2ff9179d4c21a32c96b0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa65bd935fe9d2ff9179d4c21a32c96b0"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhve__config.html#aa65bd935fe9d2ff9179d4c21a32c96b0">max_b_frames</a></td></tr>
<tr class="memdesc:aa65bd935fe9d2ff9179d4c21a32c96b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">maximum number of B-frames between non-B-frames (disable if you need low latency) <br /></td></tr>
<tr class="separator:aa65bd935fe9d2ff9179d4c21a32c96b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf3f992c793dfc227f4d723d60c98da5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaf3f992c793dfc227f4d723d60c98da5"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhve__config.html#aaf3f992c793dfc227f4d723d60c98da5">bit_rate</a></td></tr>
<tr class="memdesc:aaf3f992c793dfc227f4d723d60c98da5"><td class="mdescLeft">&#160;</td><td class="mdescRight">average bitrate in VBR mode (bit_rate != 0 and qp == 0) <br /></td></tr>
<tr class="separator:aaf3f992c793dfc227f4d723d60c98da5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a187f46faaeb7263a30d0e8a03f392423"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a187f46faaeb7263a30d0e8a03f392423"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhve__config.html#a187f46faaeb7263a30d0e8a03f392423">qp</a></td></tr>
<tr class="memdesc:a187f46faaeb7263a30d0e8a03f392423"><td class="mdescLeft">&#160;</td><td class="mdescRight">quantization parameter in CQP mode (qp != 0 and bit_rate == 0) <br /></td></tr>
<tr class="separator:a187f46faaeb7263a30d0e8a03f392423"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a319f322b976ce899581a0724e5c8cf66"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a319f322b976ce899581a0724e5c8cf66"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhve__config.html#a319f322b976ce899581a0724e5c8cf66">gop_size</a></td></tr>
<tr class="memdesc:a319f322b976ce899581a0724e5c8cf66"><td class="mdescLeft">&#160;</td><td class="mdescRight">group of pictures size, 0 for default, -1 for intra only <br /></td></tr>
<tr class="separator:a319f322b976ce899581a0724e5c8cf66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b70b64d661ba9ee3b89b117f763e9ab"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0b70b64d661ba9ee3b89b117f763e9ab"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhve__config.html#a0b70b64d661ba9ee3b89b117f763e9ab">compression_level</a></td></tr>
<tr class="memdesc:a0b70b64d661ba9ee3b89b117f763e9ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">speed-quality tradeoff, 0 for default, 1 for the highest quality, 7 for the fastest <br /></td></tr>
<tr class="separator:a0b70b64d661ba9ee3b89b117f763e9ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3501b1f93ce15ac99a0f576456bea6a0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3501b1f93ce15ac99a0f576456bea6a0"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhve__config.html#a3501b1f93ce15ac99a0f576456bea6a0">low_power</a></td></tr>
<tr class="memdesc:a3501b1f93ce15ac99a0f576456bea6a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">alternative limited low-power encoding if non-zero <br /></td></tr>
<tr class="separator:a3501b1f93ce15ac99a0f576456bea6a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Encoder configuration. </p>
<p>The width and height are dimmensions of the encoded data.</p>
<p>To enable hardware accelerated scaling specify non-zero input_width and input_height different from width and height.</p>
<p>The device can be:</p><ul>
<li>NULL or empty string (select automatically)</li>
<li>point to valid device e.g. "/dev/dri/renderD128" for vaapi</li>
</ul>
<p>If you have multiple VAAPI devices (e.g. NVidia GPU + Intel) you may have to specify Intel directly. NVidia will not work through VAAPI for encoding (it works through VAAPI-VDPAU bridge and VDPAU is only for decoding).</p>
<p>The encoder can be:</p><ul>
<li>NULL or empty string for "h264_vaapi"</li>
<li>valid ffmpeg encoder</li>
</ul>
<p>You may check encoders supported by your hardware with ffmpeg: </p><div class="fragment"><div class="line">ffmpeg -encoders | grep vaapi</div></div><!-- fragment --><p>Encoders typically can be:</p><ul>
<li>h264_vaapi</li>
<li>hevc_vaapi</li>
<li>mjpeg_vaapi</li>
<li>mpeg2_vaapi</li>
<li>vp8_vaapi</li>
<li>vp9_vaapi</li>
</ul>
<p>The pixel_format (format of what you upload) typically can be:</p><ul>
<li>nv12 (this is generally safe choice)</li>
<li>yuv420p</li>
<li>yuyv422</li>
<li>uyvy422</li>
<li>yuv422p</li>
<li>rgb0</li>
<li>bgr0</li>
<li>p010le</li>
</ul>
<p>There are no software color conversions in this library.</p>
<p>For pixel format explanation see: <a href="https://ffmpeg.org/doxygen/3.4/pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">FFmpeg pixel formats</a></p>
<p>The available profiles depend on used encoder. Use 0 to guess from input.</p>
<p>For possible profiles see: <a href="https://ffmpeg.org/doxygen/3.4/avcodec_8h.html#ab424d258655424e4b1690e2ab6fcfc66">FFmpeg profiles</a></p>
<p>For H.264 profile can typically be:</p><ul>
<li>FF_PROFILE_H264_CONSTRAINED_BASELINE</li>
<li>FF_PROFILE_H264_MAIN</li>
<li>FF_PROFILE_H264_HIGH</li>
<li>...</li>
</ul>
<p>For HEVC profile can typically be:</p><ul>
<li>FF_PROFILE_HEVC_MAIN</li>
<li>FF_PROFILE_HEVC_MAIN_10 (10 bit channel precision)</li>
<li>...</li>
</ul>
<p>You may check profiles supported by your hardware with vainfo: </p><div class="fragment"><div class="line">vainfo --display drm --<a class="code" href="structhve__config.html#a8059c3b19eb356cf729e5d25b139647e">device</a> /dev/dri/renderDXYZ</div></div><!-- fragment --><p>The max_b_frames controls the number of B frames. Disable B frames if you need low latency (at the cost of quality/space). The output will be delayed by max_b_frames+1 relative to the input.</p>
<p>Set non zero bit_rate for average average bitrate and VBR mode.</p>
<p>Set non zero qp for quantization parameter and CQP mode.</p>
<p>If both bit_rate and qp are zero then CQP with default qp is used. If both are non-zero VBR mode will be used.</p>
<p>The gop_size is size of group of pictures (e.g. I, P, B frames). Note that gop_size determines keyframe period. Setting gop_size equal to framerate results in one keyframe per second. Use 0 value for default, -1 for intra only.</p>
<p>The compression_level is speed-quality trade-off. Use 0 for driver default. For highest quality use 1, for fastest encoding use 7. The default is not highest quality so if you need it, set it explicitly to 1. The exact interpretation is hardware dependent.</p>
<p>The low_power option enables alternative encoding path available on some Intel platforms.</p>
<p>You may check support with vainfo (entrypoints ending with LP): </p><div class="fragment"><div class="line">vainfo --display drm --<a class="code" href="structhve__config.html#a8059c3b19eb356cf729e5d25b139647e">device</a> /dev/dri/renderDXYZ</div></div><!-- fragment --><p>Low power encoding supports limited subset of features.</p>
<p>Bitrate control with low power encoding requires loaded HuC. For the details on loading HuC see: <a href="https://github.com/bmegli/hardware-video-encoder/wiki/GuC-and-HuC">Loading GuC and HuC</a></p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__interface.html#gaa4d16cd2be9b1034aebf4261e38fc3a0" title="initialize internal library data. ">hve_init</a> </dd></dl>
</div><hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="hve_8h_source.html">hve.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="structhve__config.html">hve_config</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
